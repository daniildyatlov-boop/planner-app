# –§–ò–ù–ê–õ–¨–ù–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: –ü–æ–ª–Ω–æ–µ –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ syncSectionsToPlans

## –ü–†–û–ë–õ–ï–ú–ê
–†—É—Ç–∏–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏ –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å—Å—è –ø–æ—Å–ª–µ —É–¥–∞–ª–µ–Ω–∏—è. –ü—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ 2 –∑–∞–¥–∞—á - –æ–Ω–∏ –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è, –Ω–æ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –≤—Å–µ—Ö 3 - –æ–Ω–∏ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è. –≠—Ç–æ —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ —Å–∫—Ä—ã—Ç—ã–π –º–µ—Ö–∞–Ω–∏–∑–º –ø–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–¥–∞—á.

## –ê–ù–ê–õ–ò–ó –ü–†–û–ë–õ–ï–ú–´

### üîç –ü–∞—Ç—Ç–µ—Ä–Ω –ø–æ–≤–µ–¥–µ–Ω–∏—è:
- –£–¥–∞–ª—è—é 2 –∑–∞–¥–∞—á–∏ ‚Üí –ù–ï –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è ‚úÖ
- –£–¥–∞–ª—è—é –≤—Å–µ 3 –∑–∞–¥–∞—á–∏ ‚Üí –í–°–ï –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è ‚ùå

### üîç –ü—Ä–∏—á–∏–Ω–∞:
–ì–¥–µ-—Ç–æ –µ—Å—Ç—å –∫–æ–¥ –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–¥–∞—á –∏ –ø—Ä–∏ –ø–æ–ª–Ω–æ–º –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –ø–µ—Ä–µ—Å–æ–∑–¥–∞–µ—Ç –∏—Ö –∏–∑ —Ä–∞–∑–¥–µ–ª–æ–≤.

## –†–ï–®–ï–ù–ò–ï

### 1. ‚úÖ –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
```javascript
// –ö–†–ò–¢–ò–ß–ï–°–ö–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: –£–¥–∞–ª—è–µ–º –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ä–∞–∑–¥–µ–ª—ã
console.log('üßπ –ú–ò–ì–†–ê–¶–ò–Ø: –£–¥–∞–ª—è–µ–º –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ä–∞–∑–¥–µ–ª—ã...');
const sectionsKey = 'planner_sections';
if (localStorage.getItem(sectionsKey)) {
  console.log(`üóëÔ∏è –£–¥–∞–ª—è–µ–º —Ä–∞–∑–¥–µ–ª—ã –∏–∑ localStorage: ${sectionsKey}`);
  localStorage.removeItem(sectionsKey);
  sections.length = 0; // –û—á–∏—â–∞–µ–º –º–∞—Å—Å–∏–≤ —Ä–∞–∑–¥–µ–ª–æ–≤ –≤ –ø–∞–º—è—Ç–∏
}
```

### 2. ‚úÖ –ü–æ–ª–Ω–æ–µ –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ syncSectionsToPlans
```javascript
function syncSectionsToPlans(date) {
  // –ê–†–•–ò–¢–ï–ö–¢–£–†–ù–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: –§—É–Ω–∫—Ü–∏—è –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ—Ç–∫–ª—é—á–µ–Ω–∞
  // –†–∞–∑–¥–µ–ª—ã –±–æ–ª—å—à–µ –ù–ï —Å–æ–∑–¥–∞—é—Ç –∑–∞–¥–∞—á–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
  console.log('‚ö†Ô∏è syncSectionsToPlans –û–¢–ö–õ–Æ–ß–ï–ù–ê - —Ä–∞–∑–¥–µ–ª—ã –Ω–µ —Å–æ–∑–¥–∞—é—Ç –∑–∞–¥–∞—á–∏');
  return; // –í—ã—Ö–æ–¥–∏–º —Å—Ä–∞–∑—É, –Ω–∏—á–µ–≥–æ –Ω–µ –¥–µ–ª–∞–µ–º
  
  // –í–µ—Å—å –∫–æ–¥ –Ω–∏–∂–µ –æ—Ç–∫–ª—é—á–µ–Ω
  /* ... –≤–µ—Å—å –æ—Å—Ç–∞–ª—å–Ω–æ–π –∫–æ–¥ –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω ... */
}
```

## –ò–ó–ú–ï–ù–ï–ù–ò–Ø

### üßπ –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è:
1. **–£–¥–∞–ª–µ–Ω–∏–µ —Ä—É—Ç–∏–Ω–Ω—ã—Ö –∑–∞–¥–∞—á** –ø–æ –≤—Å–µ–º –∫—Ä–∏—Ç–µ—Ä–∏—è–º
2. **–£–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä—ã—Ö –∫–ª—é—á–µ–π** localStorage  
3. **–£–¥–∞–ª–µ–Ω–∏–µ —Ä–∞–∑–¥–µ–ª–æ–≤** –∏–∑ localStorage –∏ –ø–∞–º—è—Ç–∏
4. **–§–ª–∞–≥ –º–∏–≥—Ä–∞—Ü–∏–∏** –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –ø–æ–≤—Ç–æ—Ä–∞

### üö´ –ü–æ–ª–Ω–æ–µ –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏:
1. **syncSectionsToPlans()** –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ä–∞–∑—É
2. **–í–µ—Å—å –∫–æ–¥ —Ñ—É–Ω–∫—Ü–∏–∏** –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω
3. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** —á—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è –æ—Ç–∫–ª—é—á–µ–Ω–∞

## –ö–†–ò–¢–ï–†–ò–ò –£–î–ê–õ–ï–ù–ò–Ø

### üìã –†—É—Ç–∏–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏ —É–¥–∞–ª—è—é—Ç—Å—è –µ—Å–ª–∏:
```javascript
const isRoutineTask = plan.sectionId != null || 
                     plan.createdFromSection === true || 
                     (plan.id && plan.id.toString().startsWith('section:'));
```

### üìÅ –£–¥–∞–ª—è–µ–º—ã–µ –∫–ª—é—á–∏ localStorage:
- `plans` - —Å—Ç–∞—Ä—ã–π –∫–ª—é—á –ø–ª–∞–Ω–æ–≤
- `planner_rooms` - —Å—Ç–∞—Ä—ã–π –∫–ª—é—á —Ä–∞–∑–¥–µ–ª–æ–≤  
- `planner_sections` - –∫–ª—é—á —Ä–∞–∑–¥–µ–ª–æ–≤ (–ù–û–í–û–ï)

## –†–ï–ó–£–õ–¨–¢–ê–¢

### ‚úÖ –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
- –†—É—Ç–∏–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏ –ø–æ–ª–Ω–æ—Å—Ç—å—é —É–¥–∞–ª–µ–Ω—ã
- –†–∞–∑–¥–µ–ª—ã —É–¥–∞–ª–µ–Ω—ã –∏–∑ localStorage
- syncSectionsToPlans() –Ω–µ –º–æ–∂–µ—Ç —Å–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á–∏
- –ù–∏–∫–∞–∫–æ–≥–æ –∞–≤—Ç–æ—Å–æ–∑–¥–∞–Ω–∏—è —Ä—É—Ç–∏–Ω–Ω—ã—Ö –∑–∞–¥–∞—á

### ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞:
1. –£–¥–∞–ª–∏—Ç—å –≤—Å–µ —Ä—É—Ç–∏–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏ ‚Üí reload ‚Üí –∑–∞–¥–∞—á –ù–ï–¢
2. –£–¥–∞–ª–∏—Ç—å 1-2 –∑–∞–¥–∞—á–∏ ‚Üí reload ‚Üí –∑–∞–¥–∞—á –ù–ï–¢  
3. –°–æ–∑–¥–∞—Ç—å —Ä—É—á–Ω—É—é –∑–∞–¥–∞—á—É ‚Üí —Ä–∞–±–æ—Ç–∞–µ—Ç
4. –°–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É –ø–∏—Ç–∞–Ω–∏—è ‚Üí —Ä–∞–±–æ—Ç–∞–µ—Ç

## –ê–†–•–ò–¢–ï–ö–¢–£–†–ê

### üéØ –ù–æ–≤–∞—è –º–æ–¥–µ–ª—å:
- **Plans** - –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –∑–∞–¥–∞—á
- **Sections** - –ù–ï —Å—É—â–µ—Å—Ç–≤—É—é—Ç (—É–¥–∞–ª–µ–Ω—ã)
- **syncSectionsToPlans()** - –æ—Ç–∫–ª—é—á–µ–Ω–∞
- **–ó–∞–¥–∞—á–∏** - —Ç–æ–ª—å–∫–æ —Ä—É—á–Ω—ã–µ + –ø–∏—Ç–∞–Ω–∏–µ

### üîí –ì–∞—Ä–∞–Ω—Ç–∏–∏:
- –†—É—Ç–∏–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏ –ù–ò–ö–û–ì–î–ê –Ω–µ —Å–æ–∑–¥–∞—é—Ç—Å—è
- –£–¥–∞–ª–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏ –ù–ò–ö–û–ì–î–ê –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è
- –†–∞–∑–¥–µ–ª—ã –ù–ï –≤–ª–∏—è—é—Ç –Ω–∞ –∑–∞–¥–∞—á–∏
- –ü–æ–ª–Ω–∞—è –∏–∑–æ–ª—è—Ü–∏—è —Å–∏—Å—Ç–µ–º

## –°–¢–ê–¢–£–°: ‚úÖ –û–ö–û–ù–ß–ê–¢–ï–õ–¨–ù–û –ò–°–ü–†–ê–í–õ–ï–ù–û

–ü—Ä–æ–±–ª–µ–º–∞ —Å –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∏–µ–º —Ä—É—Ç–∏–Ω–Ω—ã—Ö –∑–∞–¥–∞—á —Ä–µ—à–µ–Ω–∞ —Ä–∞–¥–∏–∫–∞–ª—å–Ω–æ:
- –£–¥–∞–ª–µ–Ω—ã –≤—Å–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ —Ä—É—Ç–∏–Ω–Ω—ã—Ö –∑–∞–¥–∞—á
- –û—Ç–∫–ª—é—á–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∏—è —Ä—É—Ç–∏–Ω–Ω—ã—Ö –∑–∞–¥–∞—á
- –ú–∏–≥—Ä–∞—Ü–∏—è –æ—á–∏—â–∞–µ—Ç –≤—Å–µ —Å–ª–µ–¥—ã —Å—Ç–∞—Ä–æ–π —Å–∏—Å—Ç–µ–º—ã