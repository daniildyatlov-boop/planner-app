<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–û—Ç–ª–∞–¥–∫–∞ —Ä–∞–∑–¥–µ–ª–æ–≤</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .debug-panel { background: #f8f9fa; padding: 15px; margin: 10px 0; border-radius: 5px; }
        button { padding: 10px 15px; margin: 5px; cursor: pointer; }
        .log { background: #2d3748; color: #e2e8f0; padding: 10px; font-family: monospace; font-size: 12px; }
    </style>
</head>
<body>
    <h1>üîç –û—Ç–ª–∞–¥–∫–∞ —Å–∏—Å—Ç–µ–º—ã —Ä–∞–∑–¥–µ–ª–æ–≤</h1>
    
    <div class="debug-panel">
        <h3>–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ localStorage:</h3>
        <button onclick="showLocalStorage()">–ü–æ–∫–∞–∑–∞—Ç—å localStorage</button>
        <button onclick="clearLocalStorage()">–û—á–∏—Å—Ç–∏—Ç—å localStorage</button>
        <div id="localStorage-info"></div>
    </div>

    <div class="debug-panel">
        <h3>–¢–µ—Å—Ç —É–¥–∞–ª–µ–Ω–∏—è —Ä–∞–∑–¥–µ–ª–æ–≤:</h3>
        <button onclick="testSectionDeletion()">–¢–µ—Å—Ç —É–¥–∞–ª–µ–Ω–∏—è</button>
        <div id="test-result"></div>
    </div>

    <div class="debug-panel">
        <h3>–ö–æ–Ω—Å–æ–ª—å–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:</h3>
        <p>–û—Ç–∫—Ä–æ–π—Ç–µ –æ—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (app.html) –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –≤ –∫–æ–Ω—Å–æ–ª–∏:</p>
        <div class="log">
// 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–µ–∫—É—â–∏–µ —Ä–∞–∑–¥–µ–ª—ã
console.log('–†–∞–∑–¥–µ–ª—ã:', sections);
console.log('–£–¥–∞–ª–µ–Ω–Ω—ã–µ —Ä–∞–∑–¥–µ–ª—ã:', deletedSectionIds);

// 2. –£–¥–∞–ª–∏—Ç—å –≤—Å–µ —Ä–∞–∑–¥–µ–ª—ã
deleteSection(1001); // –£—Ç—Ä–µ–Ω–Ω—è—è –∑–∞—Ä—è–¥–∫–∞
deleteSection(1002); // –£–±–æ—Ä–∫–∞ –¥–æ–º–∞  
deleteSection(1003); // –†–∞–±–æ—á–∏–µ –∑–∞–¥–∞—á–∏

// 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ —Ä–∞–∑–¥–µ–ª—ã —É–¥–∞–ª–µ–Ω—ã
console.log('–ü–æ—Å–ª–µ —É–¥–∞–ª–µ–Ω–∏—è - —Ä–∞–∑–¥–µ–ª—ã:', sections);
console.log('–ü–æ—Å–ª–µ —É–¥–∞–ª–µ–Ω–∏—è - —É–¥–∞–ª–µ–Ω–Ω—ã–µ:', deletedSectionIds);

// 4. –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É (F5) –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–Ω–æ–≤–∞
// –ü–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤—ã–ø–æ–ª–Ω–∏—Ç—å:
console.log('–ü–æ—Å–ª–µ reload - —Ä–∞–∑–¥–µ–ª—ã:', sections);
console.log('–ü–æ—Å–ª–µ reload - —É–¥–∞–ª–µ–Ω–Ω—ã–µ:', deletedSectionIds);
        </div>
    </div>

    <script>
        function showLocalStorage() {
            const sections = localStorage.getItem('planner_sections');
            const deletedSections = localStorage.getItem('planner_deleted_section_ids');
            
            document.getElementById('localStorage-info').innerHTML = `
                <p><strong>planner_sections:</strong><br>${sections || '–ø—É—Å—Ç–æ'}</p>
                <p><strong>planner_deleted_section_ids:</strong><br>${deletedSections || '–ø—É—Å—Ç–æ'}</p>
            `;
        }

        function clearLocalStorage() {
            localStorage.removeItem('planner_sections');
            localStorage.removeItem('planner_deleted_section_ids');
            localStorage.removeItem('planner_plans');
            localStorage.removeItem('planner_rooms');
            
            document.getElementById('localStorage-info').innerHTML = '<p style="color: green;">localStorage –æ—á–∏—â–µ–Ω</p>';
        }

        function testSectionDeletion() {
            // –°–∏–º—É–ª—è—Ü–∏—è —Ç–µ—Å—Ç–∞
            const testSteps = [
                '1. –û—Ç–∫—Ä–æ–π—Ç–µ app.html –≤ –Ω–æ–≤–æ–π –≤–∫–ª–∞–¥–∫–µ',
                '2. –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ (F12)',
                '3. –í—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—ã –∏–∑ –±–ª–æ–∫–∞ –≤—ã—à–µ',
                '4. –û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É (F5)',
                '5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ —Ä–∞–∑–¥–µ–ª—ã –ù–ï –≤–µ—Ä–Ω—É–ª–∏—Å—å'
            ];
            
            document.getElementById('test-result').innerHTML = `
                <h4>–®–∞–≥–∏ –¥–ª—è —Ä—É—á–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:</h4>
                <ol>
                    ${testSteps.map(step => `<li>${step}</li>`).join('')}
                </ol>
                <p><strong>–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:</strong> –ü–æ—Å–ª–µ reload —Ä–∞–∑–¥–µ–ª—ã –¥–æ–ª–∂–Ω—ã –æ—Å—Ç–∞—Ç—å—Å—è —É–¥–∞–ª–µ–Ω–Ω—ã–º–∏</p>
            `;
        }

        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–∫–∞–∑–∞—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        window.onload = showLocalStorage;
    </script>
</body>
</html>