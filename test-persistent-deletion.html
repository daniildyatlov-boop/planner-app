<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–µ—Å—Ç –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö ID –∏ –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ–≥–æ —É–¥–∞–ª–µ–Ω–∏—è</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .test-section { margin: 20px 0; padding: 15px; border: 1px solid #ddd; border-radius: 8px; }
        .success { background-color: #d4edda; border-color: #c3e6cb; }
        .error { background-color: #f8d7da; border-color: #f5c6cb; }
        .info { background-color: #d1ecf1; border-color: #bee5eb; }
        button { padding: 10px 15px; margin: 5px; cursor: pointer; }
        .log { background: #f8f9fa; padding: 10px; margin: 10px 0; border-radius: 4px; font-family: monospace; max-height: 300px; overflow-y: auto; }
        .id-example { background: #fff3cd; padding: 8px; margin: 5px 0; border-radius: 4px; font-family: monospace; }
    </style>
</head>
<body>
    <h1>üß™ –¢–µ—Å—Ç –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö ID –∏ –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ–≥–æ —É–¥–∞–ª–µ–Ω–∏—è</h1>
    
    <div class="test-section info">
        <h3>üéØ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô –¢–ï–°–¢</h3>
        <p><strong>–ü–†–û–ë–õ–ï–ú–ê:</strong> –£–¥–∞–ª–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏ –≤–æ–∑–≤—Ä–∞—â–∞–ª–∏—Å—å –ø–æ—Å–ª–µ reload, –ø–æ—Ç–æ–º—É —á—Ç–æ –∞–≤—Ç–æ—Å–æ–∑–¥–∞–≤–∞–µ–º—ã–µ –∑–∞–¥–∞—á–∏ –ø–æ–ª—É—á–∞–ª–∏ –ù–û–í–´–ï ID –∫–∞–∂–¥—ã–π —Ä–∞–∑.</p>
        <p><strong>–†–ï–®–ï–ù–ò–ï:</strong> –î–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ ID - –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ –ø—Ä–∏ –∫–∞–∂–¥–æ–º —Å–æ–∑–¥–∞–Ω–∏–∏ –∑–∞–¥–∞—á–∏.</p>
        
        <h4>–§–æ—Ä–º–∞—Ç—ã –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö ID:</h4>
        <div class="id-example">–†—É—Ç–∏–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏: section:1001:1:2024-01-15</div>
        <div class="id-example">–ó–∞–¥–∞—á–∏ –ø–∏—Ç–∞–Ω–∏—è: meal:breakfast_2024-01-15:2024-01-15</div>
        <div class="id-example">–†—É—á–Ω—ã–µ –∑–∞–¥–∞—á–∏: task:1737123456789_abc123def</div>
    </div>

    <div class="test-section">
        <h3>üß™ –¢–µ—Å—Ç–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏</h3>
        <button onclick="testDeterministicIds()">1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ ID</button>
        <button onclick="testSectionTaskDeletion()">2. –¢–µ—Å—Ç —É–¥–∞–ª–µ–Ω–∏—è —Ä—É—Ç–∏–Ω–Ω–æ–π –∑–∞–¥–∞—á–∏</button>
        <button onclick="testMealTaskDeletion()">3. –¢–µ—Å—Ç —É–¥–∞–ª–µ–Ω–∏—è –∑–∞–¥–∞—á–∏ –ø–∏—Ç–∞–Ω–∏—è</button>
        <button onclick="simulateReloadTest()">4. –°–∏–º—É–ª—è—Ü–∏—è reload (–ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô –¢–ï–°–¢)</button>
        <button onclick="checkDeletedTaskIds()">5. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å deletedTaskIds</button>
        <button onclick="clearAllData()">6. –û—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ</button>
    </div>

    <div class="test-section">
        <h3>üìä –õ–æ–≥ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è</h3>
        <div id="testLog" class="log"></div>
    </div>

    <script>
        // –ü—Ä–æ—Å—Ç–∞—è —Å–∏—Å—Ç–µ–º–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
        function log(message, type = 'info') {
            const logEl = document.getElementById('testLog');
            const timestamp = new Date().toLocaleTimeString();
            const color = type === 'error' ? 'red' : type === 'success' ? 'green' : 'black';
            logEl.innerHTML += `<div style="color: ${color}">[${timestamp}] ${message}</div>`;
            logEl.scrollTop = logEl.scrollHeight;
        }

        // –§—É–Ω–∫—Ü–∏–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö ID (–∫–æ–ø–∏—è –∏–∑ app.html)
        function generateDeterministicId(type, params) {
            switch (type) {
                case 'section':
                    return `section:${params.sectionId}:${params.templateId}:${params.date}`;
                case 'meal':
                    return `meal:${params.mealId}:${params.date}`;
                case 'manual':
                    return `task:${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;
                default:
                    return `task:${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;
            }
        }

        function testDeterministicIds() {
            log('üîç –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö ID...');
            
            const date = '2024-01-15';
            
            // –¢–µ—Å—Ç —Ä—É—Ç–∏–Ω–Ω–æ–π –∑–∞–¥–∞—á–∏
            const sectionId1 = generateDeterministicId('section', {
                sectionId: 1001,
                templateId: 1,
                date: date
            });
            
            const sectionId2 = generateDeterministicId('section', {
                sectionId: 1001,
                templateId: 1,
                date: date
            });
            
            if (sectionId1 === sectionId2) {
                log(`‚úÖ –†—É—Ç–∏–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏: ID –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π - ${sectionId1}`, 'success');
            } else {
                log(`‚ùå –û–®–ò–ë–ö–ê: –†—É—Ç–∏–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏ –∏–º–µ—é—Ç —Ä–∞–∑–Ω—ã–µ ID: ${sectionId1} vs ${sectionId2}`, 'error');
            }
            
            // –¢–µ—Å—Ç –∑–∞–¥–∞—á–∏ –ø–∏—Ç–∞–Ω–∏—è
            const mealId1 = generateDeterministicId('meal', {
                mealId: 'breakfast_' + date,
                date: date
            });
            
            const mealId2 = generateDeterministicId('meal', {
                mealId: 'breakfast_' + date,
                date: date
            });
            
            if (mealId1 === mealId2) {
                log(`‚úÖ –ó–∞–¥–∞—á–∏ –ø–∏—Ç–∞–Ω–∏—è: ID –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π - ${mealId1}`, 'success');
            } else {
                log(`‚ùå –û–®–ò–ë–ö–ê: –ó–∞–¥–∞—á–∏ –ø–∏—Ç–∞–Ω–∏—è –∏–º–µ—é—Ç —Ä–∞–∑–Ω—ã–µ ID: ${mealId1} vs ${mealId2}`, 'error');
            }
            
            // –¢–µ—Å—Ç —Ä—É—á–Ω—ã—Ö –∑–∞–¥–∞—á (–¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º–∏)
            const manualId1 = generateDeterministicId('manual');
            const manualId2 = generateDeterministicId('manual');
            
            if (manualId1 !== manualId2) {
                log(`‚úÖ –†—É—á–Ω—ã–µ –∑–∞–¥–∞—á–∏: ID —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ - ${manualId1} –∏ ${manualId2}`, 'success');
            } else {
                log(`‚ùå –û–®–ò–ë–ö–ê: –†—É—á–Ω—ã–µ –∑–∞–¥–∞—á–∏ –∏–º–µ—é—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ ID: ${manualId1}`, 'error');
            }
        }

        function testSectionTaskDeletion() {
            log('üóëÔ∏è –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —É–¥–∞–ª–µ–Ω–∏—è —Ä—É—Ç–∏–Ω–Ω–æ–π –∑–∞–¥–∞—á–∏...');
            
            const date = new Date().toISOString().split('T')[0];
            const taskId = generateDeterministicId('section', {
                sectionId: 1001,
                templateId: 1,
                date: date
            });
            
            // –°–æ–∑–¥–∞–µ–º —Ç–µ—Å—Ç–æ–≤—É—é –∑–∞–¥–∞—á—É
            const plans = JSON.parse(localStorage.getItem('planner_plans') || '[]');
            const testTask = {
                id: taskId,
                title: '–¢–µ—Å—Ç–æ–≤–∞—è —Ä—É—Ç–∏–Ω–Ω–∞—è –∑–∞–¥–∞—á–∞',
                date: date,
                time: '07:00',
                room: '–£—Ç—Ä–µ–Ω–Ω—è—è –∑–∞—Ä—è–¥–∫–∞',
                completed: false,
                sectionId: 1001,
                templateId: 1,
                createdFromSection: true
            };
            
            plans.push(testTask);
            localStorage.setItem('planner_plans', JSON.stringify(plans));
            log(`‚úÖ –°–æ–∑–¥–∞–Ω–∞ —Ä—É—Ç–∏–Ω–Ω–∞—è –∑–∞–¥–∞—á–∞ —Å ID: ${taskId}`);
            
            // –ü–æ–º–µ—á–∞–µ–º –∫–∞–∫ —É–¥–∞–ª–µ–Ω–Ω—É—é
            const deletedTaskIds = JSON.parse(localStorage.getItem('planner_deleted_task_ids') || '[]');
            if (!deletedTaskIds.includes(taskId)) {
                deletedTaskIds.push(taskId);
                localStorage.setItem('planner_deleted_task_ids', JSON.stringify(deletedTaskIds));
                log(`üóëÔ∏è –ó–∞–¥–∞—á–∞ –ø–æ–º–µ—á–µ–Ω–∞ –∫–∞–∫ —É–¥–∞–ª–µ–Ω–Ω–∞—è: ${taskId}`, 'success');
            }
            
            // –£–¥–∞–ª—è–µ–º –∏–∑ –ø–ª–∞–Ω–æ–≤
            const updatedPlans = plans.filter(p => p.id !== taskId);
            localStorage.setItem('planner_plans', JSON.stringify(updatedPlans));
            log(`‚úÖ –ó–∞–¥–∞—á–∞ —É–¥–∞–ª–µ–Ω–∞ –∏–∑ –ø–ª–∞–Ω–æ–≤`);
        }

        function testMealTaskDeletion() {
            log('üçΩÔ∏è –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —É–¥–∞–ª–µ–Ω–∏—è –∑–∞–¥–∞—á–∏ –ø–∏—Ç–∞–Ω–∏—è...');
            
            const date = new Date().toISOString().split('T')[0];
            const mealId = 'breakfast_' + date;
            const taskId = generateDeterministicId('meal', {
                mealId: mealId,
                date: date
            });
            
            // –°–æ–∑–¥–∞–µ–º —Ç–µ—Å—Ç–æ–≤—É—é –∑–∞–¥–∞—á—É –ø–∏—Ç–∞–Ω–∏—è
            const plans = JSON.parse(localStorage.getItem('planner_plans') || '[]');
            const testTask = {
                id: taskId,
                title: 'ü•ê –ó–∞–≤—Ç—Ä–∞–∫: –¢–µ—Å—Ç–æ–≤–æ–µ –±–ª—é–¥–æ',
                date: date,
                time: null,
                room: '–ü–∏—Ç–∞–Ω–∏–µ',
                completed: false,
                createdFromMeal: true,
                mealId: mealId
            };
            
            plans.push(testTask);
            localStorage.setItem('planner_plans', JSON.stringify(plans));
            log(`‚úÖ –°–æ–∑–¥–∞–Ω–∞ –∑–∞–¥–∞—á–∞ –ø–∏—Ç–∞–Ω–∏—è —Å ID: ${taskId}`);
            
            // –ü–æ–º–µ—á–∞–µ–º –∫–∞–∫ —É–¥–∞–ª–µ–Ω–Ω—É—é
            const deletedTaskIds = JSON.parse(localStorage.getItem('planner_deleted_task_ids') || '[]');
            if (!deletedTaskIds.includes(taskId)) {
                deletedTaskIds.push(taskId);
                localStorage.setItem('planner_deleted_task_ids', JSON.stringify(deletedTaskIds));
                log(`üóëÔ∏è –ó–∞–¥–∞—á–∞ –ø–∏—Ç–∞–Ω–∏—è –ø–æ–º–µ—á–µ–Ω–∞ –∫–∞–∫ —É–¥–∞–ª–µ–Ω–Ω–∞—è: ${taskId}`, 'success');
            }
            
            // –£–¥–∞–ª—è–µ–º –∏–∑ –ø–ª–∞–Ω–æ–≤
            const updatedPlans = plans.filter(p => p.id !== taskId);
            localStorage.setItem('planner_plans', JSON.stringify(updatedPlans));
            log(`‚úÖ –ó–∞–¥–∞—á–∞ –ø–∏—Ç–∞–Ω–∏—è —É–¥–∞–ª–µ–Ω–∞ –∏–∑ –ø–ª–∞–Ω–æ–≤`);
        }

        function simulateReloadTest() {
            log('üîÑ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô –¢–ï–°–¢: –°–∏–º—É–ª—è—Ü–∏—è reload —Å—Ç—Ä–∞–Ω–∏—Ü—ã...');
            
            const plans = JSON.parse(localStorage.getItem('planner_plans') || '[]');
            const deletedTaskIds = JSON.parse(localStorage.getItem('planner_deleted_task_ids') || '[]');
            
            log(`üìä –í—Å–µ–≥–æ –∑–∞–¥–∞—á –≤ –ø–ª–∞–Ω–∞—Ö: ${plans.length}`);
            log(`üóëÔ∏è –í—Å–µ–≥–æ —É–¥–∞–ª–µ–Ω–Ω—ã—Ö ID: ${deletedTaskIds.length}`);
            
            // –ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –ü–†–û–í–ï–†–ö–ê: —É–¥–∞–ª–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏ –ù–ï –¥–æ–ª–∂–Ω—ã –ø—Ä–∏—Å—É—Ç—Å—Ç–≤–æ–≤–∞—Ç—å –≤ –ø–ª–∞–Ω–∞—Ö
            let foundDeletedTasks = 0;
            let correctlyDeleted = 0;
            
            deletedTaskIds.forEach(deletedId => {
                const taskExists = plans.some(plan => plan.id === deletedId);
                if (taskExists) {
                    log(`‚ùå –ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –û–®–ò–ë–ö–ê: –£–¥–∞–ª–µ–Ω–Ω–∞—è –∑–∞–¥–∞—á–∞ –Ω–∞–π–¥–µ–Ω–∞ –≤ –ø–ª–∞–Ω–∞—Ö! ID: ${deletedId}`, 'error');
                    foundDeletedTasks++;
                    
                    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –¥–µ—Ç–∞–ª–∏ –Ω–∞–π–¥–µ–Ω–Ω–æ–π –∑–∞–¥–∞—á–∏
                    const foundTask = plans.find(plan => plan.id === deletedId);
                    log(`   –ó–∞–¥–∞—á–∞: "${foundTask.title}" (–¥–∞—Ç–∞: ${foundTask.date})`, 'error');
                } else {
                    log(`‚úÖ –£–¥–∞–ª–µ–Ω–Ω–∞—è –∑–∞–¥–∞—á–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç: ${deletedId}`, 'success');
                    correctlyDeleted++;
                }
            });
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ—Å—Ç—å ID –¥–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∑–∞–¥–∞—á
            const today = new Date().toISOString().split('T')[0];
            const todayPlans = plans.filter(p => p.date === today);
            
            log(`üìÖ –ó–∞–¥–∞—á –Ω–∞ —Å–µ–≥–æ–¥–Ω—è (${today}): ${todayPlans.length}`);
            
            todayPlans.forEach(plan => {
                if (plan.createdFromSection && plan.sectionId && plan.templateId) {
                    const expectedId = generateDeterministicId('section', {
                        sectionId: plan.sectionId,
                        templateId: plan.templateId,
                        date: plan.date
                    });
                    
                    if (plan.id === expectedId) {
                        log(`‚úÖ –†—É—Ç–∏–Ω–Ω–∞—è –∑–∞–¥–∞—á–∞ –∏–º–µ–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π ID: ${plan.id}`);
                    } else {
                        log(`‚ùå –û–®–ò–ë–ö–ê: –†—É—Ç–∏–Ω–Ω–∞—è –∑–∞–¥–∞—á–∞ –∏–º–µ–µ—Ç –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π ID: ${plan.id}, –æ–∂–∏–¥–∞–ª—Å—è: ${expectedId}`, 'error');
                    }
                } else if (plan.createdFromMeal && plan.mealId) {
                    const expectedId = generateDeterministicId('meal', {
                        mealId: plan.mealId,
                        date: plan.date
                    });
                    
                    if (plan.id === expectedId) {
                        log(`‚úÖ –ó–∞–¥–∞—á–∞ –ø–∏—Ç–∞–Ω–∏—è –∏–º–µ–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π ID: ${plan.id}`);
                    } else {
                        log(`‚ùå –û–®–ò–ë–ö–ê: –ó–∞–¥–∞—á–∞ –ø–∏—Ç–∞–Ω–∏—è –∏–º–µ–µ—Ç –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π ID: ${plan.id}, –æ–∂–∏–¥–∞–ª—Å—è: ${expectedId}`, 'error');
                    }
                }
            });
            
            // –ò–¢–û–ì–û–í–´–ô –†–ï–ó–£–õ–¨–¢–ê–¢
            if (foundDeletedTasks === 0) {
                log(`üéâ –¢–ï–°–¢ –ü–†–û–ô–î–ï–ù! –í—Å–µ ${correctlyDeleted} —É–¥–∞–ª–µ–Ω–Ω—ã—Ö –∑–∞–¥–∞—á –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –≤ –ø–ª–∞–Ω–∞—Ö`, 'success');
                log(`‚úÖ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô –ë–ê–ì –ò–°–ü–†–ê–í–õ–ï–ù - —É–¥–∞–ª–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏ –ù–ï –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è!`, 'success');
            } else {
                log(`üí• –¢–ï–°–¢ –ü–†–û–í–ê–õ–ï–ù! –ù–∞–π–¥–µ–Ω–æ ${foundDeletedTasks} —É–¥–∞–ª–µ–Ω–Ω—ã—Ö –∑–∞–¥–∞—á –≤ –ø–ª–∞–Ω–∞—Ö`, 'error');
                log(`‚ùå –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô –ë–ê–ì –ù–ï –ò–°–ü–†–ê–í–õ–ï–ù - —É–¥–∞–ª–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è!`, 'error');
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
                log(`üîç –û–¢–õ–ê–î–û–ß–ù–ê–Ø –ò–ù–§–û–†–ú–ê–¶–ò–Ø:`, 'error');
                log(`   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, –Ω–µ –ø–µ—Ä–µ—Å–æ–∑–¥–∞–µ—Ç—Å—è –ª–∏ –º–∞—Å—Å–∏–≤ plans –≥–¥–µ-—Ç–æ –≤ –∫–æ–¥–µ`, 'error');
                log(`   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è splice() –≤–º–µ—Å—Ç–æ filter()`, 'error');
                log(`   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ—Ä—è–¥–æ–∫ –∑–∞–≥—Ä—É–∑–∫–∏: loadDeletedTaskIds() –ü–ï–†–ï–î syncSectionsToPlans()`, 'error');
            }
        }

        function checkDeletedTaskIds() {
            const deletedTaskIds = JSON.parse(localStorage.getItem('planner_deleted_task_ids') || '[]');
            const plans = JSON.parse(localStorage.getItem('planner_plans') || '[]');
            
            log(`üìä –í—Å–µ–≥–æ —É–¥–∞–ª–µ–Ω–Ω—ã—Ö ID: ${deletedTaskIds.length}`);
            log(`üìä –í—Å–µ–≥–æ –∑–∞–¥–∞—á –≤ –ø–ª–∞–Ω–∞—Ö: ${plans.length}`);
            
            if (deletedTaskIds.length === 0) {
                log('‚ÑπÔ∏è –ù–µ—Ç —É–¥–∞–ª–µ–Ω–Ω—ã—Ö –∑–∞–¥–∞—á');
                return;
            }
            
            deletedTaskIds.forEach((id, index) => {
                log(`${index + 1}. ${id}`);
            });
        }

        function clearAllData() {
            localStorage.removeItem('planner_plans');
            localStorage.removeItem('planner_deleted_task_ids');
            localStorage.removeItem('planner_teams');
            localStorage.removeItem('planner_sections');
            localStorage.removeItem('planner_nutrition');
            log('üßπ –í—Å–µ –¥–∞–Ω–Ω—ã–µ –æ—á–∏—â–µ–Ω—ã', 'success');
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        log('üöÄ –¢–µ—Å—Ç –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö ID –∏ –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ–≥–æ —É–¥–∞–ª–µ–Ω–∏—è –∑–∞–ø—É—â–µ–Ω');
        log('üí° –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–Ω–æ–ø–∫–∏ –≤—ã—à–µ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏');
        log('‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô –¢–ï–°–¢: –ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –∏ —É–¥–∞–ª–µ–Ω–∏—è –∑–∞–¥–∞—á –Ω–∞–∂–º–∏—Ç–µ "–°–∏–º—É–ª—è—Ü–∏—è reload"');
    </script>
</body>
</html>